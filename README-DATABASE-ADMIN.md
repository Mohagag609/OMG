# ูุธุงู ุฅุฏุงุฑุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช - Next.js + Prisma

## โ ุชู ุฅูุฌุงุฒ ุงููุทููุจ ุจุงููุงูู

ุชู ุฅูุดุงุก ูุธุงู ุฅุฏุงุฑุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุทููุจ ุจูุฌุงุญ! ๐

## ๐ ุงูููุฒุงุช ุงูููุฌุฒุฉ

### 1. ุฅุฏุงุฑุฉ ุฃููุงุน ููุงุนุฏ ุงูุจูุงูุงุช
- โ **SQLite** (ูุญูู)
- โ **PostgreSQL** (ูุญูู) 
- โ **PostgreSQL** (ุณุญุงุจู - ูุซู Neon)

### 2. ุงูุนูููุงุช ุงููุฏุนููุฉ
- โ **ุชููุฆุฉ ูุงุนุฏุฉ ุฌุฏูุฏุฉ** (ุฃูู ุชุดุบูู ุฃู ุนูุฏ ุงูุทูุจ)
- โ **ุงูุชุจุฏูู ุจูู ุงูุฃููุงุน** (ุจุฏูู ููุฏุงู ุงูุจูุงูุงุช)
- โ **ูุณุญ/ุฅุนุงุฏุฉ ุถุจุท ุงููุงุนุฏุฉ** (Reset)
- โ **ุฒุฑุน ุจูุงูุงุช ุชุฌุฑูุจูุฉ** (Seed) ุงุฎุชูุงุฑู

### 3. ุงูุจูุฆุงุช ุงููุฏุนููุฉ
- โ **ูุญูู** (dev) - ูุนุฏู `.env.local` ููุดุบู ุฃูุงูุฑ Prisma
- โ **ุฅูุชุงุฌู** (Netlify) - ูุญุฏูุซ Env Vars ุนุจุฑ Netlify API + Build Hook

### 4. ุงูุฃูุงู
- โ **ุญูุงูุฉ Admin** ุนุจุฑ ููุชุงุญ ุฑุฃุณ HTTP `X-Admin-Key`
- โ **ุชุญูู ูู ุงูุตูุงุญูุงุช** ูุจู ุชูููุฐ ุฃู ุนูููุฉ

## ๐ ุงููููุงุช ุงููุถุงูุฉ/ุงููุญุฏุซุฉ

### ุงูููุชุจุงุช ุงูุฃุณุงุณูุฉ
```
src/lib/env.ts                 # ุฅุฏุงุฑุฉ ูุชุบูุฑุงุช ุงูุจูุฆุฉ ูุญู URLs
src/lib/prisma.ts              # PrismaClient ูุน override ููู URL
src/lib/db-admin.ts            # ููุทู init/switch/wipe + Netlify API
```

### API Routes
```
src/app/api/db-admin/init/route.ts      # POST { type, mode: 'new', seed, pg?, cloudUrl? }
src/app/api/db-admin/switch/route.ts    # POST { type, mode: 'switch', seed, pg?, cloudUrl? }
src/app/api/db-admin/wipe/route.ts      # POST { confirm: true }
```

### ูุงุฌูุฉ ุงููุณุชุฎุฏู
```
src/components/admin/DbSettingsForm.tsx # ูููุฐุฌ ุฅุฏุงุฑุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช
src/app/admin/settings/page.tsx         # ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช
```

### ูููุงุช ุฃุฎุฑู
```
prisma/seed.ts                 # ุจูุงูุงุช ุชุฌุฑูุจูุฉ ูุญุฏุซุฉ
.env.example                   # ูุซุงู ุนูู ูุชุบูุฑุงุช ุงูุจูุฆุฉ
package.json                   # ุณูุฑูุจุชุงุช ูุณุงุนุฏุฉ ูุญุฏุซุฉ
DATABASE-ADMIN-GUIDE.md       # ุฏููู ุดุงูู ููุงุณุชุฎุฏุงู
```

## ๐ฏ ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ุงูุฅุนุฏุงุฏ ุงูุฃููู
```bash
# ูุณุฎ ูุชุบูุฑุงุช ุงูุจูุฆุฉ
cp .env.example .env.local

# ุชุซุจูุช ุงูุชุจุนูุงุช
npm install

# ุชุดุบูู ุงูุชุทุจูู
npm run dev
```

### 2. ุงููุตูู ูุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช
ุงูุชูู ุฅูู: `http://localhost:3000/admin/settings`

### 3. ุฅุฏุฎุงู ููุชุงุญ ุงูุฃุฏูู
ุฃุฏุฎู ุงูููุชุงุญ ุงููุทุงุจู ูู `ADMIN_SETUP_KEY` ูู `.env.local`

### 4. ุงุฎุชูุงุฑ ููุน ูุงุนุฏุฉ ุงูุจูุงูุงุช

#### SQLite (ูุญูู)
- ุงุฎุชุฑ "SQLite (ูุญูู)"
- ุงุถุบุท "ุชููุฆุฉ ูุงุนุฏุฉ ุฌุฏูุฏุฉ"

#### PostgreSQL (ูุญูู)
- ุงุฎุชุฑ "PostgreSQL (ูุญูู)"
- ุฃุฏุฎู ุฅุนุฏุงุฏุงุช ุงูุงุชุตุงู (host, port, user, password, database)
- ุงุถุบุท "ุชููุฆุฉ ูุงุนุฏุฉ ุฌุฏูุฏุฉ"

#### PostgreSQL (ุณุญุงุจู)
- ุงุฎุชุฑ "PostgreSQL (ุณุญุงุจู)"
- ุฃุฏุฎู Database URL ุงููุงูู
- ุงุถุบุท "ุชููุฆุฉ ูุงุนุฏุฉ ุฌุฏูุฏุฉ"

### 5. ุฒุฑุน ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ
- ุญุฏุฏ "ุฒุฑุน ุจูุงูุงุช ุชุฌุฑูุจูุฉ (ุงุฎุชูุงุฑู)" ูุจู ุชูููุฐ ุงูุนูููุฉ

## ๐ง ุงูุณูุฑูุจุชุงุช ุงููุณุงุนุฏุฉ

```bash
# ุชุดุบูู ูุน ููุน ูุงุนุฏุฉ ุจูุงูุงุช ูุญุฏุฏ
npm run dev:sqlite      # SQLite
npm run dev:pg          # PostgreSQL ูุญูู
npm run dev:cloud       # PostgreSQL ุณุญุงุจู

# ุฅุฏุงุฑุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช
npm run db:generate     # ุชูููุฏ Prisma Client
npm run db:migrate      # ุชุทุจูู ุงูููุงุฌุฑุงุช
npm run db:deploy       # ุชูููุฏ + ุชุทุจูู ุงูููุงุฌุฑุงุช
npm run db:seed         # ุฒุฑุน ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ
```

## ๐ ูู ุจูุฆุฉ ุงูุฅูุชุงุฌ (Netlify)

### 1. ุฅุนุฏุงุฏ ูุชุบูุฑุงุช ุงูุจูุฆุฉ ุนูู Netlify
```
ADMIN_SETUP_KEY=your-strong-admin-key
NETLIFY_AUTH_TOKEN=your-personal-access-token
NETLIFY_SITE_ID=your-site-id
BUILD_HOOK_URL=your-build-hook-url
```

### 2. ุชุดุบูู ุงูุนูููุงุช
ุนูุฏ ุชูููุฐ ุฃู ุนูููุฉ ูู ุงูุฅูุชุงุฌ:
1. ูุชู ุชุญุฏูุซ ูุชุบูุฑุงุช ุงูุจูุฆุฉ ุนูู Netlify
2. ูุชู ุชุดุบูู Build Hook ูุฅุนุงุฏุฉ ุงููุดุฑ
3. ุฃุซูุงุก ุงูุจูุงุกุ ูุชู ุชุทุจูู ุงูููุงุฌุฑุงุช

## ๐ก๏ธ ุงูุฃูุงู

- ุฌููุน ุงูุนูููุงุช ุชุชุทูุจ ููุชุงุญ ุฃุฏูู ุตุญูุญ
- ูุชู ุงูุชุญูู ูู ุงูููุชุงุญ ุนุจุฑ ุฑุฃุณ HTTP `X-Admin-Key`
- ูููู ุฏูุฌ NextAuth ูุงุญูุงู ููุชุญูู ุงููุชูุฏู

## ๐ ุณุฌูุงุช ุงูุนูููุงุช

ุฌููุน ุงูุนูููุงุช ุชุณุฌู ุชูุงุตูู ุงูุชูููุฐ:
- โ ูุฌุงุญ/ูุดู ูู ุฎุทูุฉ
- โ ุฃููุงุช ุงูุชูููุฐ
- โ ุฑุณุงุฆู ุงูุฎุทุฃ ุงูุชูุตูููุฉ
- โ ุนุฑุถ ุงูุณุฌูุงุช ูู ูุงุฌูุฉ ุงูุฅุฏุงุฑุฉ

## ๐ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

ุชู ุฅูุดุงุก ูุธุงู ุฅุฏุงุฑุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุทููุจ ุจุงููุงูู ูุน:

1. **ูุงุฌูุฉ ุณููุฉ ุงูุงุณุชุฎุฏุงู** ูุฅุฏุงุฑุฉ ููุงุนุฏ ุงูุจูุงูุงุช
2. **ุฏุนู ูุงูู ููุฃููุงุน ุงูุซูุงุซุฉ** (SQLite, PostgreSQL ูุญูู/ุณุญุงุจู)
3. **ุนูู ูุญูู ูุฅูุชุงุฌู** ูุน Netlify
4. **ุฃูุงู ูุชูุฏู** ูุน ุชุญูู ูู ุงูุตูุงุญูุงุช
5. **ุณุฌูุงุช ููุตูุฉ** ูุฌููุน ุงูุนูููุงุช
6. **ุชูุซูู ุดุงูู** ููุงุณุชุฎุฏุงู ูุงูุตูุงูุฉ

## ๐ ุฌุงูุฒ ููุงุณุชุฎุฏุงู!

ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ููุฑุงู. ููููู:
- ุชุดุบูู `npm run dev`
- ุงูุงูุชูุงู ุฅูู `/admin/settings`
- ุงูุจุฏุก ูู ุฅุฏุงุฑุฉ ููุงุนุฏ ุงูุจูุงูุงุช

**ุชู ุฅูุฌุงุฒ ุงููุทููุจ ุจูุฌุงุญ! ๐ฏ**