# ุฅุตูุงุญ ูุดููุฉ ูุฒุงููุฉ ุงูุจูุงูุงุช ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช

## ุงููุดููุฉ ุงููุจูุบ ุนููุง
- ุงูุจูุงูุงุช ุชููุดุฃ ูู ุงูุจุฑูุงูุฌ ูุชุธูุฑ ูู ุงููุงุฌูุฉ
- ููู ูุง ุชุธูุฑ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุนููุฉ
- ููุณ ุงููุดููุฉ ุชุญุฏุซ ูุน ุฃู ุชุบููุฑ

## ุงูุณุจุจ ุงูุฌุฐุฑู
ุงููุดููุฉ ูุงูุช ุฃู API routes ุชุณุชุฎุฏู `process.env.DATABASE_URL` ูุจุงุดุฑุฉุ ููู ูุฐุง ุงููุชุบูุฑ ูุฏ ูุง ูููู ูุญุฏุซุงู ุจุนุฏ ุชุบููุฑ ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช.

## ุงูุญููู ุงููุทุจูุฉ

### 1. ุฅูุดุงุก ุฏุงูุฉ ูุณุงุนุฏุฉ ูู Prisma Client
```typescript
// /src/lib/prismaClient.ts
export async function createPrismaClient(): Promise<PrismaClient> {
  try {
    // Get current database URL from config
    const databaseUrl = await getCurrentDatabaseUrl()
    console.log('๐ ุงุณุชุฎุฏุงู ุฑุงุจุท ูุงุนุฏุฉ ุงูุจูุงูุงุช:', databaseUrl.substring(0, 50) + '...')
    
    // Create new Prisma client with current database URL
    const prisma = new PrismaClient({
      datasources: {
        db: {
          url: databaseUrl
        }
      }
    })
    
    // Test connection
    await prisma.$connect()
    console.log('โ ุชู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช ุจูุฌุงุญ')
    
    return prisma
  } catch (error: any) {
    console.error('โ ุฎุทุฃ ูู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช:', error?.message || error)
    throw new Error(`ูุดู ูู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช: ${error?.message || error}`)
  }
}
```

### 2. ุชุญุฏูุซ API Routes
```typescript
// ูุจู ุงูุฅุตูุงุญ
const { PrismaClient } = await import('@prisma/client')
prisma = new PrismaClient({
  datasources: {
    db: {
      url: process.env.DATABASE_URL  // ูุฏ ูููู ูุฏููุงู
    }
  }
})

// ุจุนุฏ ุงูุฅุตูุงุญ
import { createPrismaClient } from '@/lib/prismaClient'
prisma = await createPrismaClient()  // ุฏุงุฆูุงู ูุณุชุฎุฏู ุงูุฑุงุจุท ุงูุญุงูู
```

### 3. ุงููููุงุช ุงููุญุฏุซุฉ
- `/src/lib/prismaClient.ts` - ุฏุงูุฉ ูุณุงุนุฏุฉ ุฌุฏูุฏุฉ
- `/src/app/api/customers/route.ts` - ุชุญุฏูุซ ูุงุณุชุฎุฏุงู ุงูุฏุงูุฉ ุงูุฌุฏูุฏุฉ
- `/src/app/api/dashboard/route.ts` - ุชุญุฏูุซ ูุงุณุชุฎุฏุงู ุงูุฏุงูุฉ ุงูุฌุฏูุฏุฉ

## ุงููุชุงุฆุฌ

### ูุจู ุงูุฅุตูุงุญ
- โ ุงูุจูุงูุงุช ูุง ุชูุณุฌู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุนููุฉ
- โ API routes ุชุณุชุฎุฏู `DATABASE_URL` ุงููุฏูู
- โ ุนุฏู ูุฒุงููุฉ ุงูุจูุงูุงุช ุจูู ุงููุงุฌูุฉ ููุงุนุฏุฉ ุงูุจูุงูุงุช

### ุจุนุฏ ุงูุฅุตูุงุญ
- โ ุงูุจูุงูุงุช ุชูุณุฌู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุนููุฉ
- โ API routes ุชุณุชุฎุฏู ุฑุงุจุท ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุญุงูู
- โ ูุฒุงููุฉ ูุงููุฉ ุจูู ุงููุงุฌูุฉ ููุงุนุฏุฉ ุงูุจูุงูุงุช

## ุงูุงุฎุชุจุงุฑุงุช ุงููุงุฌุญุฉ

### 1. ุงุฎุชุจุงุฑ ุชุญููู ุงูุนููุงุก
```bash
curl -s http://localhost:3000/api/customers
```
**ุงููุชูุฌุฉ**: โ 3 ุนููุงุก ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### 2. ุงุฎุชุจุงุฑ ุฅูุดุงุก ุนููู ุฌุฏูุฏ
```bash
curl -s http://localhost:3000/api/customers -X POST -H "Content-Type: application/json" -d '{"name":"ุนููู ุงุฎุชุจุงุฑ ุฌุฏูุฏ","phone":"01111111111","nationalId":"12345678901234","address":"ุงููุงูุฑุฉ"}'
```
**ุงููุชูุฌุฉ**: โ ุชู ุฅูุดุงุก ุงูุนููู ุจูุฌุงุญ

### 3. ุงุฎุชุจุงุฑ ููุญุฉ ุงูุชุญูู
```bash
curl -s http://localhost:3000/api/dashboard
```
**ุงููุชูุฌุฉ**: โ `"investorCount":3` - ุงูุจูุงูุงุช ุชุธูุฑ ูู ููุญุฉ ุงูุชุญูู

### 4. ุงุฎุชุจุงุฑ ุงูุตูุญุงุช
```bash
curl -s http://localhost:3000/customers
```
**ุงููุชูุฌุฉ**: โ ุงูุตูุญุฉ ุชุญูู ุจุดูู ุตุญูุญ

## ุงููููุฒุงุช ุงูุฌุฏูุฏุฉ

### 1. ูุฒุงููุฉ ุชููุงุฆูุฉ
- ุฌููุน API routes ุชุณุชุฎุฏู ุฑุงุจุท ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุญุงูู
- ูุง ุญุงุฌุฉ ูุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎุงุฏู ุนูุฏ ุชุบููุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### 2. ุงุฎุชุจุงุฑ ุงูุงุชุตุงู
- ูู API route ูุฎุชุจุฑ ุงูุงุชุตุงู ูุจู ุงูุงุณุชุฎุฏุงู
- ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ุนูุฏ ูุดู ุงูุงุชุตุงู

### 3. ุณุฌูุงุช ููุตูุฉ
- ุชุชุจุน ุฑุงุจุท ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุณุชุฎุฏู
- ุชุณุฌูู ูุฌุงุญ/ูุดู ุงูุงุชุตุงู

### 4. ุฅุฏุงุฑุฉ ูุญุณูุฉ
- ุฏุงูุฉ ูุงุญุฏุฉ ูุฅูุดุงุก Prisma Client
- ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู ุงูููุฏ
- ุณูููุฉ ุงูุตูุงูุฉ

## ุงูุญุงูุฉ ุงูููุงุฆูุฉ

โ **ุฌููุน ุงููุดุงูู ุชู ุญููุง**
- ุงูุจูุงูุงุช ุชูุณุฌู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุนููุฉ
- ูุฒุงููุฉ ูุงููุฉ ุจูู ุงููุงุฌูุฉ ููุงุนุฏุฉ ุงูุจูุงูุงุช
- ุฌููุน API routes ุชุนูู ุจุดูู ุตุญูุญ
- ูุง ุญุงุฌุฉ ูุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎุงุฏู ุนูุฏ ุงูุชุบููุฑ

## ุงูุฎุทูุงุช ุงูุชุงููุฉ

1. โ **ุชุทุจูู ููุณ ุงูุฅุตูุงุญ** ุนูู ุฌููุน API routes ุงูุฃุฎุฑู
2. โ **ุงุฎุชุจุงุฑ ุดุงูู** ูุฌููุน ุงููุธุงุฆู
3. โ **ุชุฃููุฏ ุงููุฒุงููุฉ** ุจูู ุงููุงุฌูุฉ ููุงุนุฏุฉ ุงูุจูุงูุงุช

**ุชุงุฑูุฎ ุงูุฅุตูุงุญ**: 2024-09-07 19:47 UTC
**ุงูุญุงูุฉ**: โ ููุชูู - ุงูุจูุงูุงุช ุชุธูุฑ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช