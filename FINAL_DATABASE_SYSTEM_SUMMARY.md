# ูุธุงู ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช - ุชู ุงูุชูููุฐ ุจูุฌุงุญ โ

## ูุธุฑุฉ ุนุงูุฉ
ุชู ุชูููุฐ ูุธุงู ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจูุฌุงุญ ูู ูุดุฑูุน Next.js + Prisma ูุน ุฏุนู ูุชุนุฏุฏ ููุงุนุฏ ุงูุจูุงูุงุช.

## ุงููููุงุช ุงูููุดุฃุฉ/ุงููุญุฏุซุฉ

### 1. ูููุงุช Prisma Schema
- โ `prisma/schema.postgres.prisma` - ุณูููุง PostgreSQL ูุงููุฉ
- โ `prisma/schema.sqlite.prisma` - ุณูููุง SQLite ูุทุงุจูุฉ
- โ ุญุฐู `prisma/schema.prisma` ุงููุฏูู ูุชุฌูุจ ุงูุชุนุงุฑุถ

### 2. ุณูุฑูุจุชุงุช package.json
- โ `prisma:generate:pg` - ุชูููุฏ Prisma Client ูู PostgreSQL
- โ `prisma:generate:sqlite` - ุชูููุฏ Prisma Client ูู SQLite
- โ `prisma:migrate:pg` - ุชุดุบูู migrations ูู PostgreSQL
- โ `prisma:migrate:sqlite` - ุชุดุบูู migrations ูู SQLite
- โ ุชุญุฏูุซ `postinstall` script

### 3. ูููุงุช ุงููุณุงุนุฏุฉ
- โ `src/util/db.ts` - ุฏุงูุฉ ุงุฎุชุจุงุฑ ุงูุงุชุตุงู
- โ `app/api/settings/database/route.ts` - API ูุฅุฏุงุฑุฉ ุงูุฅุนุฏุงุฏุงุช
- โ `app/settings/database/page.tsx` - ุตูุญุฉ ูุงุฌูุฉ ุงููุณุชุฎุฏู
- โ `middleware.ts` - ุชูุฌูู ุงููุณุชุฎุฏู ููุฅุนุฏุงุฏุงุช
- โ `scripts/setup-db.js` - ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช (ูุญุฏุซ)
- โ `scripts/build-production.js` - ุจูุงุก ุงูุฅูุชุงุฌ (ูุญุฏุซ)

### 4. ูููุงุช ุงูุชูููู
- โ `.env.example` - ูุซุงู ูุชุบูุฑุงุช ุงูุจูุฆุฉ
- โ `.env.local` - ุฅุนุฏุงุฏุงุช ุงูุชุทููุฑ ุงูุงูุชุฑุงุถูุฉ
- โ `netlify.toml` - ุชูููู Netlify
- โ `vercel.json` - ุชูููู Vercel
- โ `DATABASE_SETUP.md` - ุฏููู ุงูุงุณุชุฎุฏุงู

## ุงููููุฒุงุช ุงููุทุจูุฉ

### 1. ุฏุนู ูุชุนุฏุฏ ููุงุนุฏ ุงูุจูุงูุงุช
- **SQLite**: ููุชุทููุฑ ุงููุญูู (ุงูุชุฑุงุถู)
- **PostgreSQL ูุญูู**: ููุชุทููุฑ ุงููุชูุฏู
- **PostgreSQL ุณุญุงุจู**: ููุฅูุชุงุฌ (Neon, Supabase, ุฅูุฎ)

### 2. ูุงุฌูุฉ ุฅุนุฏุงุฏุงุช ุณููุฉ
- ุงุฎุชูุงุฑ ููุน ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู ูุงุฆูุฉ ููุณุฏูุฉ
- ุญููู ูุฎุตุตุฉ ููู ููุน ูุงุนุฏุฉ ุจูุงูุงุช
- ุงุฎุชุจุงุฑ ุงูุงุชุตุงู ูุจู ุงูุญูุธ
- ุฑุณุงุฆู ูุงุถุญุฉ ุจุงููุบุฉ ุงูุนุฑุจูุฉ

### 3. ุฏุนู ุงูุจูุฆุงุช ุงููุฎุชููุฉ
- **ุชุทููุฑ ูุญูู**: ูุญูุธ ูู `.env.local` ููุดุบู migrations ุชููุงุฆูุงู
- **ุณูุฑูุฑูุณ (Vercel/Netlify)**: ูุนุฑุถ ูุชุบูุฑุงุช ุงูุจูุฆุฉ ุงููุทููุจุฉ

### 4. ุญูุงูุฉ ุงูุชุทุจูู
- middleware ููุฌู ุงููุณุชุฎุฏู ูุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช ุฅุฐุง ูู ุชูุชูู ุงูุฅุนุฏุงุฏุงุช
- ุงุฎุชุจุงุฑ ุตุญุฉ ุงูุงุชุตุงู ูุจู ุงูุญูุธ
- ุงุณุชุซูุงุก API routes ูู ุงูุชูุฌูู ุงูุฅุฌุจุงุฑู

## ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ุงูุชุทููุฑ ุงููุญูู
```bash
npm install
npm run dev
```
ุณูุชู ุชูุฌููู ุชููุงุฆูุงู ูุตูุญุฉ ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช.

### 2. ุงูุฅูุชุงุฌ (Netlify/Vercel)
1. ุงุฐูุจ ุฅูู ููุญุฉ ุงูุชุญูู
2. ุฃุถู ูุชุบูุฑุงุช ุงูุจูุฆุฉ:
   ```
   DATABASE_URL=postgresql://user:pass@host:port/db
   PRISMA_SCHEMA_PATH=prisma/schema.postgres.prisma
   SETUP_COMPLETE=true
   ```
3. ุฃุนุฏ ุงููุดุฑ

### 3. ุงุณุชุฎุฏุงู ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช
1. ุงูุชุญ `/settings/database`
2. ุงุฎุชุฑ ููุน ูุงุนุฏุฉ ุงูุจูุงูุงุช
3. ุงููุฃ ุงูุจูุงูุงุช ุงููุทููุจุฉ
4. ุงุถุบุท "ุญูุธ ุงูุฅุนุฏุงุฏุงุช"

## ุงูุงุฎุชุจุงุฑุงุช ุงูููุฌุฒุฉ

### โ ุงุฎุชุจุงุฑ SQLite
- ุฅูุดุงุก ูุงุนุฏุฉ ุจูุงูุงุช SQLite ุจูุฌุงุญ
- ุชูููุฏ Prisma Client
- ุชุทุจูู Schema

### โ ุงุฎุชุจุงุฑ PostgreSQL
- ุชูููุฏ Prisma Client ูู PostgreSQL
- ุงูุชุญูู ูู ุตุญุฉ ุงูุณูููุง

### โ ุงุฎุชุจุงุฑ API
- GET `/api/settings/database` - ูุนูู โ
- POST `/api/settings/database` - ูุนูู โ

### โ ุงุฎุชุจุงุฑ ุงููุงุฌูุฉ
- ุตูุญุฉ `/settings/database` - ุชุนูู โ
- middleware ุงูุชูุฌูู - ูุนูู โ

## ุงูุฃูุงูุฑ ุงููุชุงุญุฉ

```bash
# ุชูููุฏ Prisma Client
npm run prisma:generate:pg      # PostgreSQL
npm run prisma:generate:sqlite  # SQLite

# ุชุทุจูู Migrations
npm run prisma:migrate:pg       # PostgreSQL
npm run prisma:migrate:sqlite   # SQLite

# ุงูุจูุงุก ููุฅูุชุงุฌ
npm run build                   # ูุณุชุฎุฏู PRISMA_SCHEMA_PATH
```

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฎุทุฃ: "Invalid datasource URL"
- ุชุฃูุฏ ูู ุตุญุฉ `DATABASE_URL`
- ุชุฃูุฏ ูู ุฃู `PRISMA_SCHEMA_PATH` ูุดูุฑ ููููู ุงูุตุญูุญ

### ุฎุทุฃ: "Schema validation failed"
- ุชุฃูุฏ ูู ุฃู ุงูุณูููุง ุงููุฎุชุงุฑุฉ ุชุชุทุงุจู ูุน ููุน ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุงุณุชุฎุฏู `prisma/schema.postgres.prisma` ูู PostgreSQL
- ุงุณุชุฎุฏู `prisma/schema.sqlite.prisma` ูู SQLite

### ุฎุทุฃ: "Connection failed"
- ุชุฃูุฏ ูู ุฃู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชุนูู
- ุชุญูู ูู ุฅุนุฏุงุฏุงุช ุงูุดุจูุฉ ูุงูุฌุฏุงุฑ ุงููุงุฑู
- ุชุฃูุฏ ูู ุตุญุฉ ุจูุงูุงุช ุงูุงุนุชูุงุฏ

## ุงููููุงุช ุงููููุฉ

- `prisma/schema.postgres.prisma` - ุณูููุง PostgreSQL
- `prisma/schema.sqlite.prisma` - ุณูููุง SQLite
- `app/settings/database/page.tsx` - ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช
- `app/api/settings/database/route.ts` - API ููุฅุนุฏุงุฏุงุช
- `middleware.ts` - ุชูุฌูู ุงููุณุชุฎุฏู ููุฅุนุฏุงุฏุงุช
- `scripts/setup-db.js` - ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช

## ุงูุญุงูุฉ ุงูููุงุฆูุฉ

๐ **ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุจุงููุงูู!**

- โ ุฌููุน ุงููููุงุช ููุดุฃุฉ ููุญุฏุซุฉ
- โ ุงูุนูุงูุงุช ูู Prisma Schema ุตุญูุญุฉ
- โ API routes ุชุนูู ุจุดูู ุตุญูุญ
- โ ูุงุฌูุฉ ุงููุณุชุฎุฏู ุชุนูู
- โ ุฏุนู ูุชุนุฏุฏ ููุงุนุฏ ุงูุจูุงูุงุช
- โ ุฏุนู ุงูุจูุฆุงุช ุงููุฎุชููุฉ
- โ ุงุฎุชุจุงุฑุงุช ููุชููุฉ

ููููู ุงูุขู ุชุดุบูู `npm run dev` ูุณุชุชู ุชูุฌููู ูุตูุญุฉ ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุฅููุงู ุงูุฅุนุฏุงุฏ.